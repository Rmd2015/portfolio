<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Aymen mssd | High-Ticket Video Content Partner</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;800&display=swap" rel="stylesheet">

  <style>
    :root {
      --accent: #8b5cf6;
      --bg: #000;
      --card: #0a0a0a;
    }

    body {
      font-family: 'Plus Jakarta Sans', sans-serif;
      color: #fff;
      scroll-behavior: smooth;
      background: radial-gradient(
          ellipse at 10% 20%,
          rgba(139, 92, 246, 0.18) 0%,
          transparent 40%
        ),
        radial-gradient(
          ellipse at 80% 70%,
          rgba(168, 85, 247, 0.14) 0%,
          transparent 50%
        ),
        radial-gradient(
          circle at 30% 80%,
          rgba(124, 58, 237, 0.11) 0%,
          transparent 45%
        ),
        linear-gradient(
          135deg,
          #0f001a 0%,
          #050014 50%,
          #0a001f 100%
        );
      background-attachment: fixed;
      min-height: 100vh;
    }

    .glow-bg {
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: -2;
      background:
        radial-gradient(circle at 30% 20%, rgba(139, 92, 246, 0.08) 0%, transparent 50%),
        radial-gradient(circle at 70% 80%, rgba(168, 85, 247, 0.06) 0%, transparent 60%);
      opacity: 0.9;
    }

    .hidden { display: none !important; }

    ::-webkit-scrollbar { height:6px; width:6px; }
    ::-webkit-scrollbar-track { background:#000; }
    ::-webkit-scrollbar-thumb { background:#222; border-radius:10px; }
    ::-webkit-scrollbar-thumb:hover { background:var(--accent); }

    .video-item {
      background: var(--card);
      border-radius: 16px;
      overflow: hidden;
      border: 1px solid rgba(255,255,255,0.06);
      transition: all .35s ease;
      position: relative;
    }

    .video-item:hover {
      border-color: rgba(139,92,246,0.8);
      transform: translateY(-4px);
    }

    .video-item.active-video {
      border-color: var(--accent) !important;
      box-shadow: 0 0 0 3px rgba(139,92,246,0.4);
      transition: all 0.4s ease;
    }

    iframe { width:100%; height:100%; border:0; }

    .tab-btn {
      padding:9px 18px;
      border-radius:14px;
      font-size:12px;
      font-weight:800;
      color:#71717a;
      transition:all .25s ease;
      white-space:nowrap;
    }

    .tab-btn.active {
      background:var(--accent);
      color:#fff;
      box-shadow:0 10px 30px rgba(139,92,246,0.18);
    }

    .fade-in {
      animation:fadeIn .8s ease forwards;
      opacity:0;
      transform:translateY(10px);
    }

    @keyframes fadeIn {
      to { opacity:1; transform:translateY(0); }
    }

    .social-btn {
      width:52px;
      height:52px;
      border-radius:999px;
      display:flex;
      align-items:center;
      justify-content:center;
      background:#0b0b0b;
      border:1px solid rgba(255,255,255,0.06);
      transition:all .25s ease;
    }

    .social-btn:hover {
      border-color:rgba(139,92,246,0.55);
      transform:translateY(-2px);
    }

    .social-btn svg { width:22px; height:22px; opacity:.95; }

    /* SUBTABS */
    .subtab-btn {
      padding: 8px 16px;
      border-radius: 12px;
      font-size: 13px;
      font-weight: 700;
      background: #111;
      color: #aaa;
      border: 1px solid #222;
      transition: all 0.25s;
    }

    .subtab-btn.active {
      background: var(--accent);
      color: white;
      border-color: var(--accent);
    }

    /* LONG GRID */
    .long-grid {
      display: grid;
      grid-template-columns: repeat(1, minmax(0, 1fr));
      gap: 18px;
    }

    @media (min-width: 768px) {
      .long-grid {
        grid-template-columns: repeat(2, minmax(0, 1fr));
        gap: 22px;
      }
    }

    @media (min-width: 768px) {
      .long-grid > .video-item:last-child:nth-child(odd) {
        grid-column: 1 / -1;
      }
    }

    /* âœ… SHORTS GRID PRO */
    .shorts-grid-wrapper{
      max-height: calc((100vw / 4) * (16/9) * 2 + 24px);
      /* fallback: sera recalculÃ© en JS */
      overflow-y: auto;
      padding-right: 2px;
    }

    /* Le grid */
    .shorts-grid {
      display: grid;
      gap: 16px;
      grid-template-columns: repeat(2, minmax(0, 1fr));
    }

    @media (min-width: 640px) {
      .shorts-grid {
        grid-template-columns: repeat(3, minmax(0, 1fr));
      }
    }

    @media (min-width: 1024px) {
      .shorts-grid {
        grid-template-columns: repeat(4, minmax(0, 1fr));
      }
    }

    /* ðŸ”¥ IMPORTANT: shorts doivent remplir la ligne mÃªme si 1/2/3 */
    .shorts-grid > .video-item{
      width:100%;
    }

    /* Preview */
    .yt-thumb {
      width:100%;
      height:100%;
      position:absolute;
      inset:0;
      background-size:cover;
      background-position:center;
      cursor:pointer;
      z-index: 1;
    }

    .yt-thumb::after {
      content:"";
      position:absolute;
      inset:0;
      background:linear-gradient(to top, rgba(0,0,0,0.45), rgba(0,0,0,0.05));
      z-index: 1;
    }

    .play-btn {
      position:absolute;
      inset:0;
      display:flex;
      align-items:center;
      justify-content:center;
      z-index:5;
      pointer-events:none;
    }

    .play-btn span {
      width:64px;
      height:64px;
      border-radius:999px;
      background:rgba(0,0,0,0.55);
      border:1px solid rgba(255,255,255,0.12);
      display:flex;
      align-items:center;
      justify-content:center;
      backdrop-filter: blur(6px);
      transition:transform .2s ease;
      z-index: 2;
    }

    .video-item:hover .play-btn span {
      transform:scale(1.05);
    }

    .play-btn svg {
      width:26px;
      height:26px;
      margin-left:3px;
      fill:white;
      opacity:.95;
    }

    /* Skeleton */
    .skeleton {
      position:absolute;
      inset:0;
      background:linear-gradient(90deg, #0b0b0b 0%, #141414 45%, #0b0b0b 100%);
      background-size:200% 100%;
      animation: shimmer 1.3s infinite linear;
      z-index:3;
    }

    @keyframes shimmer {
      0%{ background-position: 200% 0; }
      100%{ background-position: -200% 0; }
    }

    /* Mute btn */
    .mute-btn {
      position:absolute;
      top:14px;
      right:14px;
      z-index:50;
      padding:10px 12px;
      border-radius:14px;
      background:rgba(0,0,0,0.6);
      border:1px solid rgba(255,255,255,0.08);
      display:flex;
      align-items:center;
      gap:8px;
      font-size:12px;
      font-weight:900;
      letter-spacing:.04em;
      text-transform:uppercase;
      transition:all .2s ease;
      backdrop-filter: blur(10px);
    }

    .mute-btn:hover {
      border-color:rgba(139,92,246,0.6);
      transform:scale(1.02);
    }

    .mute-btn svg {
      width:18px;
      height:18px;
      fill:white;
      opacity:.95;
    }

    /* Long preview badge */
    .badge-long{
      position:absolute;
      left:14px;
      top:14px;
      z-index:50;
      padding:8px 10px;
      border-radius:999px;
      background:rgba(0,0,0,0.55);
      border:1px solid rgba(255,255,255,0.08);
      font-size:11px;
      font-weight:900;
      letter-spacing:.04em;
      text-transform:uppercase;
      backdrop-filter: blur(10px);
      color:#fff;
      opacity:.95;
    }
      .badge-short{
      position:absolute;
      left:14px;
      top:14px;
      z-index:50;
      padding:8px 10px;
      border-radius:999px;
      background:rgba(0,0,0,0.55);
      border:1px solid rgba(255,255,255,0.08);
      font-size:11px;
      font-weight:900;
      letter-spacing:.04em;
      text-transform:uppercase;
      backdrop-filter: blur(10px);
      color:#fff;
      opacity:.95;
    }
  </style>
</head>

<body class="antialiased overflow-x-hidden">
  <div class="glow-bg"></div>

  <!-- HERO -->
  <section class="relative z-10 min-h-screen flex items-center px-6 md:px-20 py-20">
    <div class="max-w-6xl mx-auto w-full grid md:grid-cols-2 gap-14 items-center">
      <div class="space-y-7 text-center md:text-left fade-in" style="animation-delay:.1s;">
        <div class="inline-flex items-center gap-2 px-3 py-1 rounded-lg border border-purple-500/20 bg-purple-500/5 text-purple-400 text-[10px] font-extrabold tracking-[0.25em] uppercase">
          High-Ticket Content Partner
        </div>

        <h1 class="text-4xl sm:text-5xl md:text-6xl lg:text-7xl font-extrabold tracking-tight leading-[1.05]">
          <span class="block">Grow on social media</span>
          <span style="color: var(--accent);">Make more leads.</span>
        </h1>

        <div class="mt-5 space-y-2 text-xl sm:text-2xl">
          <p class="text-white font-semibold">
            Aymen â€” pro editor <span class="text-purple-400">3+ years</span>
          </p>
          <p class="text-zinc-300">
            Premium storytelling that <span class="text-purple-400">converts attention</span>
          </p>
        </div>

        <div class="flex flex-col sm:flex-row gap-4 justify-center md:justify-start pt-2">
          <button onclick="scrollToWork()"
            class="w-full sm:w-auto bg-[#8b5cf6] hover:bg-[#7c3aed] text-white px-7 py-3.5 rounded-2xl font-extrabold text-sm transition-all duration-300 shadow-lg shadow-purple-500/20">
            See Professional Work
          </button>
          <a href="#contact"
            class="w-full sm:w-auto bg-zinc-900 hover:bg-zinc-800 text-white px-7 py-3.5 rounded-2xl font-extrabold text-sm transition-all duration-300 border border-white/5 text-center">
            Scale Your Content
          </a>
        </div>

        <div class="flex gap-4 justify-center md:justify-start pt-4">
          <a class="social-btn" href="https://x.com/aymenmssd123" target="_blank">
            <svg viewBox="0 0 24 24" fill="none"><path d="M17.5 3H21L13.3 11.8L22.4 21H15.4L9.9 15.2L4.8 21H1.3L9.6 11.4L0.9 3H8.1L13 8.2L17.5 3Z" fill="white"/></svg>
          </a>
          <a class="social-btn" href="https://instagram.com/aymen_mssd/" target="_blank">
            <svg viewBox="0 0 24 24" fill="none"><path d="M7 2H17C19.76 2 22 4.24 22 7V17C22 19.76 19.76 22 17 22H7C4.24 22 2 19.76 2 17V7C2 4.24 4.24 2 7 2Z" stroke="#ff3d00" stroke-width="2"/><path d="M12 16.2C14.3196 16.2 16.2 14.3196 16.2 12C16.2 9.6804 14.3196 7.8 12 7.8C9.6804 7.8 7.8 9.6804 7.8 12C7.8 14.3196 9.6804 16.2 12 16.2Z" stroke="#ff3d00" stroke-width="2"/><path d="M17.5 6.6H17.51" stroke="#ff3d00" stroke-width="3" stroke-linecap="round"/></svg>
          </a>
          <a class="social-btn" href="mailto:aymenmessdz31@gmail.com" target="_blank">
            <svg viewBox="0 0 24 24" fill="none"><path d="M4 6H20V18H4V6Z" stroke="#3b82f6" stroke-width="2"/><path d="M4 7L12 13L20 7" stroke="#3b82f6" stroke-width="2"/></svg>
          </a>
          <a class="social-btn" href="https://wa.me/+213553667383" target="_blank">
            <svg viewBox="0 0 24 24" fill="none"><path d="M20.5 11.5C20.5 16.1944 16.6944 20 12 20C10.6 20 9.28 19.68 8.1 19.1L3.5 20.5L4.9 15.9C4.32 14.72 4 13.4 4 12C4 7.3056 7.8056 3.5 12.5 3.5C16.85 3.5 20.5 7.15 20.5 11.5Z" fill="#22c55e" opacity="0.95"/><path d="M10.2 9.2C10.45 8.9 10.7 8.9 10.95 9.15L11.6 9.9C11.8 10.1 11.85 10.35 11.7 10.6L11.35 11.2C11.2 11.45 11.25 11.65 11.4 11.85C12 12.8 12.85 13.55 13.85 14.1C14.05 14.2 14.25 14.2 14.4 14L15 13.35C15.2 13.15 15.45 13.1 15.7 13.25L16.55 13.75C16.85 13.9 16.9 14.2 16.75 14.45C16.35 15.15 15.65 15.55 14.85 15.4C12.3 14.95 9.2 11.95 8.7 9.55C8.55 8.75 9 8.05 9.7 7.7C9.9 7.6 10.05 7.7 10.2 7.85Z" fill="#0b0b0b"/></svg>
          </a>
        </div>
      </div>

      <div class="flex justify-center md:justify-end fade-in" style="animation-delay:.25s;">
        <div class="relative w-52 h-52 sm:w-64 sm:h-64 md:w-80 md:h-80">
          <div class="absolute inset-0 border border-purple-500/20 rounded-[28px] rotate-3"></div>
          <img src="assets/aymen-photo.jpg" alt="Aymen mssd"
            class="absolute inset-0 w-full h-full object-cover rounded-[28px] shadow-2xl border border-white/5 bg-zinc-900">
        </div>
      </div>
    </div>
  </section>

  <!-- WORK -->
  <section id="work" class="relative z-10 py-20 px-6 md:px-20 bg-[#030303] border-t border-white/5">
    <div class="max-w-6xl mx-auto">

      <div class="flex flex-col md:flex-row items-center justify-between mb-12 gap-8">
        <div class="text-center md:text-left">
          <h2 class="text-purple-500 text-[10px] font-extrabold tracking-[0.4em] uppercase mb-2">High-End Portfolio</h2>
          <h3 class="text-2xl md:text-3xl font-extrabold">Professional Showcase</h3>
          <p class="text-zinc-500 text-sm mt-2 max-w-lg">
            Focused on ROI-driven content. Clean edits, professional pacing, and premium sound design for top-tier creators.
          </p>
        </div>

        <div class="flex bg-zinc-900/80 p-1 rounded-2xl border border-white/5">
          <button onclick="switchTab('shorts')" id="tab-shorts" class="tab-btn active">Short Form</button>
          <button onclick="switchTab('long')" id="tab-long" class="tab-btn">Documentary/Long</button>
        </div>
      </div>

      <!-- SUBTABS -->
      <div class="flex justify-center md:justify-start mb-6 gap-3 flex-wrap">
        <button class="subtab-btn active" id="subtab-short-talking" onclick="switchSubTab('short-talking')">Short â€“ Talking Head</button>
        <button class="subtab-btn" id="subtab-short-realestate" onclick="switchSubTab('short-realestate')">Short â€“ Real Estate</button>

        <button class="subtab-btn hidden" id="subtab-long-talking" onclick="switchSubTab('long-talking')">Long â€“ Talking Head</button>
        <button class="subtab-btn hidden" id="subtab-long-documentary" onclick="switchSubTab('long-documentary')">Long â€“ Documentary</button>
      </div>

      <div id="portfolio-container">

        <!-- SHORTS -->
        <div id="shorts-wrapper">
          <div class="shorts-grid-wrapper">
            <div id="shorts-content" class="shorts-grid transition-all duration-500">

              <!-- Short Form â€“ Talking Head -->
              <div class="video-item aspect-[9/16] yt-short short-talking" data-video-id="z6JMaEGuCjY">
                <div class="skeleton"></div>
                <div class="badge-short">Talking Head</div>
                <div class="yt-thumb" style="background-image:url('https://i.ytimg.com/vi/z6JMaEGuCjY/hqdefault.jpg')"></div>
                <div class="play-btn"><span><svg viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg></span></div>
              </div>

              <div class="video-item aspect-[9/16] yt-short short-talking" data-video-id="ueABS9TACHE">
                <div class="skeleton"></div>
                <div class="badge-short">Talking Head</div>
                <div class="yt-thumb" style="background-image:url('https://i.ytimg.com/vi/ueABS9TACHE/hqdefault.jpg')"></div>
                <div class="play-btn"><span><svg viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg></span></div>
              </div>

              <div class="video-item aspect-[9/16] yt-short short-talking" data-video-id="ouN49K_iwdw">
                <div class="skeleton"></div>
                <div class="badge-short">Talking Head</div>
                <div class="yt-thumb" style="background-image:url('https://i.ytimg.com/vi/ouN49K_iwdw/hqdefault.jpg')"></div>
                <div class="play-btn"><span><svg viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg></span></div>
              </div>

              <!-- Short Form â€“ Real Estate -->
              <div class="video-item aspect-[9/16] yt-short short-realestate hidden" data-video-id="p5tvffMHIW4">
                <div class="skeleton"></div>
                <div class="badge-short">Real Estate</div>
                <div class="yt-thumb" style="background-image:url('https://i.ytimg.com/vi/p5tvffMHIW4/hqdefault.jpg')"></div>
                <div class="play-btn"><span><svg viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg></span></div>
              </div>

              <div class="video-item aspect-[9/16] yt-short short-realestate hidden" data-video-id="GBX34L6v7CY">
                <div class="skeleton"></div>
                <div class="badge-short">Real Estate</div>

                <div class="yt-thumb" style="background-image:url('https://i.ytimg.com/vi/GBX34L6v7CY/hqdefault.jpg')"></div>
                <div class="play-btn"><span><svg viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg></span></div>
              </div>

            </div>
          </div>
        </div>

        <!-- LONG FORM -->
        <div id="long-content" class="hidden long-grid transition-all duration-500">

          <!-- Long Talking -->
          <div class="video-item aspect-video w-full yt-long long-wrap" data-sub="long-talking" data-video-id="bSQq6W4B2kE">
            <div class="skeleton"></div>
            <div class="badge-long">Talking Head</div>
            <div class="yt-thumb" style="background-image:url('https://i.ytimg.com/vi/bSQq6W4B2kE/hqdefault.jpg')"></div>
            <div class="play-btn"><span><svg viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg></span></div>
          </div>

          <div class="video-item aspect-video w-full yt-long long-wrap" data-sub="long-talking" data-video-id="VUyKrQgAOJo">
            <div class="skeleton"></div>
            <div class="badge-long">Talking Head</div>
            <div class="yt-thumb" style="background-image:url('https://i.ytimg.com/vi/VUyKrQgAOJo/hqdefault.jpg')"></div>
            <div class="play-btn"><span><svg viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg></span></div>
          </div>

          <div class="video-item aspect-video w-full yt-long long-wrap" data-sub="long-talking" data-video-id="rwtU0EQ0j-8">
            <div class="skeleton"></div>
            <div class="badge-long">Talking Head</div>
            <div class="yt-thumb" style="background-image:url('https://i.ytimg.com/vi/rwtU0EQ0j-8/hqdefault.jpg')"></div>
            <div class="play-btn"><span><svg viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg></span></div>
          </div>

          <div class="video-item aspect-video w-full yt-long long-wrap" data-sub="long-talking" data-video-id="mkdGMHs6sRM">
            <div class="skeleton"></div>
            <div class="badge-long">Talking Head</div>
            <div class="yt-thumb" style="background-image:url('https://i.ytimg.com/vi/mkdGMHs6sRM/hqdefault.jpg')"></div>
            <div class="play-btn"><span><svg viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg></span></div>
          </div>

          <!-- Long Documentary -->
          <div class="video-item aspect-video w-full yt-long long-wrap hidden" data-sub="long-documentary" data-video-id="KfBdcUpL2bA">
            <div class="skeleton"></div>
            <div class="badge-long">Documentary</div>
            <div class="yt-thumb" style="background-image:url('https://i.ytimg.com/vi/KfBdcUpL2bA/hqdefault.jpg')"></div>
            <div class="play-btn"><span><svg viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg></span></div>
          </div>

          <div class="video-item aspect-video w-full yt-long long-wrap hidden" data-sub="long-documentary" data-video-id="0AD9KXuIuGE">
            <div class="skeleton"></div>
            <div class="badge-long">Documentary</div>
            <div class="yt-thumb" style="background-image:url('https://i.ytimg.com/vi/0AD9KXuIuGE/hqdefault.jpg')"></div>
            <div class="play-btn"><span><svg viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg></span></div>
          </div>

          <div class="video-item aspect-video w-full yt-long long-wrap hidden" data-sub="long-documentary" data-video-id="8X7TBZbk0h0">
            <div class="skeleton"></div>
            <div class="badge-long">Documentary</div>
            <div class="yt-thumb" style="background-image:url('https://i.ytimg.com/vi/8X7TBZbk0h0/hqdefault.jpg')"></div>
            <div class="play-btn"><span><svg viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg></span></div>
          </div>

        </div>
      </div>
    </div>
  </section>

  <!-- CONTACT -->
  <section id="contact" class="relative z-10 py-20 px-6 md:px-20 border-t border-white/5">
    <div class="max-w-6xl mx-auto">
      <div class="bg-zinc-950 border border-white/5 rounded-3xl p-8 md:p-12">
        <div class="flex flex-col md:flex-row items-start md:items-center justify-between gap-8">
          <div>
            <h4 class="text-2xl md:text-3xl font-extrabold">Ready to scale?</h4>
            <p class="text-zinc-400 mt-2 max-w-xl">
              I only work with serious creators who value quality and reliability. Let's discuss your project goals.
            </p>
          </div>
          <div class="flex flex-col sm:flex-row gap-4 w-full md:w-auto">
            <a href="https://wa.me/+213553667383" target="_blank"
              class="w-full md:w-auto text-center bg-[#8b5cf6] hover:bg-[#7c3aed] text-white px-7 py-3.5 rounded-2xl font-extrabold text-sm transition-all duration-300">
              WhatsApp Me
            </a>
            <a href="mailto:aymenmessdz31@gmail.com"
              class="w-full md:w-auto text-center bg-zinc-900 hover:bg-zinc-800 text-white px-7 py-3.5 rounded-2xl font-extrabold text-sm transition-all duration-300 border border-white/5">
              Professional Email
            </a>
          </div>
        </div>
      </div>
    </div>
  </section>

  <footer class="py-12 text-center text-zinc-600 text-[10px] tracking-widest border-t border-white/5 uppercase">
    Â© 2026 Aymen mssd <span class="mx-2">|</span> High-Ticket Content Partner
  </footer>

  <!-- YT API -->
  <script src="https://www.youtube.com/iframe_api"></script>

  <script>
    let players = [];
    let observerLong = null;
    let currentTab = 'shorts';
    let currentSubTab = 'short-talking';

    function pauseAllVideos(exceptPlayer = null) {
      players.forEach(p => {
        try {
          if (p && p.pauseVideo && p !== exceptPlayer) p.pauseVideo();
        } catch(e){}
      });
    }

    function destroyPlayer(player) {
      if (player && typeof player.destroy === 'function') {
        try { player.destroy(); } catch (e) {}
      }
    }

    function buildYTPlayer(iframeEl, onReadyCb = null) {
      if (!iframeEl.id) iframeEl.id = "player-" + Math.random().toString(16).slice(2);

      const player = new YT.Player(iframeEl.id, {
        events: {
          onReady: (e) => {
            const wrap = iframeEl.closest(".video-item");
            if (wrap) {
              const skel = wrap.querySelector('.skeleton');
              if (skel) skel.remove();
            }
            if (onReadyCb) onReadyCb(e);
          },
          onStateChange: (e) => {
            if (e.data === YT.PlayerState.PLAYING) {
              pauseAllVideos(e.target);
            }
          }
        }
      });

      players.push(player);
      return player;
    }

    function onYouTubeIframeAPIReady() {
      initShortsClickToPlay();
      initLongPreviewClickToPlay();
      initThumbSkeletonFix();
      initVisibilityChangePause();
      updateSubTabDisplay();
      setupShortsScrollLimit();
      window.addEventListener("resize", setupShortsScrollLimit);
    }

    function initThumbSkeletonFix() {
      document.querySelectorAll(".video-item").forEach(card => {
        const thumb = card.querySelector(".yt-thumb");
        if (!thumb) return;

        const bg = thumb.style.backgroundImage;
        const url = bg.replace(/url\(['"]?/, '').replace(/['"]?\)/, '');

        const img = new Image();
        img.onload = () => {
          const skel = card.querySelector(".skeleton");
          if (skel) skel.remove();
        };
        img.onerror = () => {
          setTimeout(() => {
            const skel = card.querySelector(".skeleton");
            if (skel) skel.remove();
          }, 1200);
        };
        img.src = url;
      });
    }

    /* -------------------- SHORTS -------------------- */
    function initShortsClickToPlay() {
      document.querySelectorAll(".yt-short").forEach((card) => {
        const videoId = card.getAttribute("data-video-id");

        function startShort() {
          pauseAllVideos();

          card.innerHTML = `
            <div class="skeleton"></div>
            <iframe
              class="js-short"
              src="https://www.youtube.com/embed/${videoId}?enablejsapi=1&playsinline=1&rel=0&autoplay=1&mute=0&vq=hd1080"
              allow="autoplay; encrypted-media"
              allowfullscreen
            ></iframe>
          `;

          const iframe = card.querySelector("iframe");
          const player = buildYTPlayer(iframe, () => {
            try { player.setPlaybackQuality("hd1080"); } catch(e){}
          });

          setTimeout(() => {
            try { player.playVideo(); } catch(e){}
          }, 150);
        }

        card.addEventListener("click", () => {
          if (card.querySelector("iframe")) return;
          startShort();
        });

        card.setAttribute("tabindex", "0");
        card.addEventListener("keydown", (e) => {
          if (e.key === "Enter") {
            if (card.querySelector("iframe")) return;
            startShort();
          }
        });
      });
    }

    function setupShortsScrollLimit(){
      // max 2 lignes visibles, scroll si > 8
      const wrapper = document.querySelector(".shorts-grid-wrapper");
      const grid = document.querySelector(".shorts-grid");
      if(!wrapper || !grid) return;

      const visibleItems = Array.from(grid.children).filter(el => !el.classList.contains("hidden"));
      if(visibleItems.length <= 8){
        wrapper.style.maxHeight = "none";
        wrapper.style.overflowY = "visible";
        return;
      }

      // On calcule la hauteur dâ€™un short visible
      const first = visibleItems[0];
      const rect = first.getBoundingClientRect();
      const itemHeight = rect.height;

      // 2 lignes + gap
      const computed = window.getComputedStyle(grid);
      const gap = parseFloat(computed.gap || "16");

      const maxH = (itemHeight * 2) + gap;
      wrapper.style.maxHeight = maxH + "px";
      wrapper.style.overflowY = "auto";
    }

    /* -------------------- LONG (Preview + Play) -------------------- */
    function initLongPreviewClickToPlay() {
      document.querySelectorAll(".yt-long").forEach((card) => {
        const videoId = card.getAttribute("data-video-id");

        function startLong() {
          pauseAllVideos();

          card.innerHTML = `
            <div class="skeleton"></div>
            <button class="mute-btn" data-muted="1" onclick="toggleMute(event)">
              <svg viewBox="0 0 24 24"><path d="M11 5 6 9H2v6h4l5 4V5z"/></svg>
              <span>Muted</span>
            </button>
            <iframe
              class="js-long"
              src="https://www.youtube.com/embed/${videoId}?enablejsapi=1&playsinline=1&rel=0&autoplay=1&mute=1&vq=hd1080"
              allow="autoplay; encrypted-media"
              allowfullscreen
            ></iframe>
          `;

          const iframe = card.querySelector("iframe");
          const player = buildYTPlayer(iframe, () => {
            try { player.setPlaybackQuality("hd1080"); } catch(e){}
          });

          setTimeout(() => {
            try { player.playVideo(); } catch(e){}
          }, 150);
        }

        card.addEventListener("click", () => {
          if (card.querySelector("iframe")) return;
          startLong();
        });

        card.setAttribute("tabindex", "0");
        card.addEventListener("keydown", (e) => {
          if (e.key === "Enter") {
            if (card.querySelector("iframe")) return;
            startLong();
          }
        });
      });
    }

    /* -------------------- Tabs -------------------- */
    function switchTab(type) {
      pauseAllVideos();

      const shorts = document.getElementById('shorts-wrapper');
      const long = document.getElementById('long-content');
      const tabS = document.getElementById('tab-shorts');
      const tabL = document.getElementById('tab-long');

      if (type === 'shorts') {
        shorts.classList.remove('hidden');
        long.classList.add('hidden');
        tabS.classList.add('active');
        tabL.classList.remove('active');
        currentTab = 'shorts';
        currentSubTab = 'short-talking';
      } else {
        long.classList.remove('hidden');
        shorts.classList.add('hidden');
        tabL.classList.add('active');
        tabS.classList.remove('active');
        currentTab = 'long';
        currentSubTab = 'long-talking';
      }

      updateSubTabDisplay();
      setTimeout(() => setupShortsScrollLimit(), 120);
    }

    function updateSubTabDisplay() {
      const btnShortTalking = document.getElementById('subtab-short-talking');
      const btnShortRealEstate = document.getElementById('subtab-short-realestate');
      const btnLongTalking = document.getElementById('subtab-long-talking');
      const btnLongDoc = document.getElementById('subtab-long-documentary');

      if (currentTab === 'shorts') {
        btnShortTalking.classList.remove('hidden');
        btnShortRealEstate.classList.remove('hidden');
        btnLongTalking.classList.add('hidden');
        btnLongDoc.classList.add('hidden');

        btnShortTalking.classList.toggle('active', currentSubTab === 'short-talking');
        btnShortRealEstate.classList.toggle('active', currentSubTab === 'short-realestate');

        document.querySelectorAll('#shorts-content .yt-short').forEach(el => {
          el.classList.toggle('hidden', !el.classList.contains(currentSubTab));
        });

      } else {
        btnShortTalking.classList.add('hidden');
        btnShortRealEstate.classList.add('hidden');
        btnLongTalking.classList.remove('hidden');
        btnLongDoc.classList.remove('hidden');

        btnLongTalking.classList.toggle('active', currentSubTab === 'long-talking');
        btnLongDoc.classList.toggle('active', currentSubTab === 'long-documentary');

        document.querySelectorAll('#long-content [data-sub]').forEach(el => {
          el.classList.toggle('hidden', el.dataset.sub !== currentSubTab);
        });
      }

      setTimeout(() => setupShortsScrollLimit(), 80);
    }

    function switchSubTab(sub) {
      currentSubTab = sub;
      updateSubTabDisplay();
    }

    function scrollToWork() {
      document.getElementById('work').scrollIntoView({ behavior: 'smooth' });
    }

    /* -------------------- Mute -------------------- */
    function toggleMute(event){
      event.preventDefault();
      event.stopPropagation();

      const btn = event.currentTarget;
      const wrap = btn.closest(".video-item");
      const iframe = wrap.querySelector("iframe");

      const player = players.find(p => {
        try { return p.getIframe() === iframe; } catch(e){ return false; }
      });

      if(!player) return;

      const muted = btn.getAttribute("data-muted") === "1";

      if(muted){
        try { player.unMute(); } catch(e){}
        btn.setAttribute("data-muted","0");
        btn.querySelector("span").textContent = "Sound";
      }else{
        try { player.mute(); } catch(e){}
        btn.setAttribute("data-muted","1");
        btn.querySelector("span").textContent = "Muted";
      }
    }

    function initVisibilityChangePause() {
      document.addEventListener("visibilitychange", () => {
        if (document.hidden) pauseAllVideos();
      });
      window.addEventListener("blur", () => pauseAllVideos());
    }
  </script>
</body>
</html>

